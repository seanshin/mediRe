# WeRuby AI - 스마트 의료 통합 플랫폼

[![License](https://img.shields.io/badge/license-MIT-blue.svg)](LICENSE)
[![Cloudflare Pages](https://img.shields.io/badge/Cloudflare-Pages-orange.svg)](https://pages.cloudflare.com/)
[![Hono](https://img.shields.io/badge/Hono-Framework-brightgreen.svg)](https://hono.dev/)

## 프로젝트 개요

**WeRuby AI**는 AI 기술을 활용한 차세대 의료 통합 플랫폼입니다. 일정 기반 자동화 시스템을 통해 병원 예약부터 진료, 처방전 관리, 보험 청구까지 모든 의료 서비스를 하나의 플랫폼에서 완결할 수 있습니다.

### 핵심 가치
- 🤖 **AI 기반 자동화**: 예약부터 보험청구까지 전 과정 자동 처리
- 📅 **일정 중심 설계**: 사용자 일정을 기반으로 최적의 의료 서비스 제공
- 🔗 **완전한 통합**: 병원, 보험사, 약국이 하나로 연결된 생태계
- 💊 **건강 모니터링**: 의료 기록 기반 실시간 건강 상태 분석
- 🛡️ **보험 자동 처리**: 진료 즉시 보험 청구 및 환급 처리

## 🎯 WeRuby AI 브랜드 아이덴티티

**WeRuby**는 'We'와 'Ruby(루비)'의 합성어입니다:

### We (우리) - 협력적 의료 생태계
환자, 의료진, AI가 함께하는 협력적인 의료 환경을 의미합니다. 의료 서비스는 혼자가 아닌 '함께' 만들어가는 것이라는 철학을 담았습니다.

### Ruby (루비) - 소중한 건강
- 💎 **보석처럼 소중한 건강**: 루비는 세계에서 가장 귀한 보석 중 하나로, 사용자의 건강이 그만큼 소중하다는 의미
- ❤️ **활력과 생명**: 루비의 붉은색은 생명력, 열정, 건강한 삶을 상징
- 🛡️ **보호와 치유**: 고대부터 루비는 치유의 보석으로 여겨져 왔으며, 건강을 지키고 회복시키는 WeRuby AI의 역할을 표현
- ✨ **희귀성과 특별함**: 각 사용자의 건강 여정이 유일무이하게 특별하다는 의미

**브랜드 슬로건**: "Your Health, Our Ruby" (당신의 건강은 우리의 루비입니다)

## 🚀 접속 URL

### 운영 환경
- **메인 페이지 (서비스 컨셉)**: https://3000-ijzlsqgsdkan82btk4rhl-c81df28e.sandbox.novita.ai
- **소개 페이지**: https://3000-ijzlsqgsdkan82btk4rhl-c81df28e.sandbox.novita.ai/about
- **API 문서**: https://3000-ijzlsqgsdkan82btk4rhl-c81df28e.sandbox.novita.ai/api-docs

### 사용자 페이지
- **회원가입**: https://3000-ijzlsqgsdkan82btk4rhl-c81df28e.sandbox.novita.ai/register
- **로그인**: https://3000-ijzlsqgsdkan82btk4rhl-c81df28e.sandbox.novita.ai/login
- **개인 대시보드**: https://3000-ijzlsqgsdkan82btk4rhl-c81df28e.sandbox.novita.ai/dashboard

### 관리자 페이지
- **사용자 관리**: https://3000-ijzlsqgsdkan82btk4rhl-c81df28e.sandbox.novita.ai/admin/users

### 외부 링크
- **서비스 제공업체**: https://weruby.co.kr
- **GitHub 저장소**: https://github.com/seanshin/mediRe

## ⭐ 주요 기능 (9단계 통합 서비스)

### Step 1: 사용자 요청 🗣️
- ✅ AI 채팅/음성 인터페이스
- ✅ 자연어 기반 대화
- ✅ 빠른 액션 버튼
- ✅ 24/7 가용성

### Step 2: AI 분석 및 이해 🤖
- ✅ 증상 분석 및 진료과목 매칭
- ✅ 사용자 일정 분석
- ✅ 선호도 및 이력 기반 추천
- ✅ 맥락 이해 (Context-aware)

### Step 3: 맞춤형 추천 🎯
- ✅ 병원 및 의사 추천 (평점/거리/전문성 기반)
- ✅ 최적 예약 시간 제안
- ✅ 예상 대기시간 안내
- ✅ 다중 옵션 제공

### Step 4: 자동 예약 및 일정 등록 📅
- ✅ 원클릭 예약 확정
- ✅ 캘린더 자동 등록
- ✅ 예약 확인 알림
- ✅ 리마인더 설정

### Step 5: 진료 전 준비 📋
- ✅ 문진표 자동 작성
- ✅ 이전 진료 기록 전송
- ✅ 필요 서류 안내
- ✅ 위치 및 주차 정보

### Step 6: 진료 진행 🏥
- ✅ 실시간 상태 업데이트
- ✅ 대기 순번 알림
- ✅ 진료 내용 실시간 기록
- ✅ 의사-환자 커뮤니케이션

### Step 7: 진료 후 처리 💊
- ✅ 진단서 자동 저장
- ✅ 처방전 디지털화
- ✅ 복약 일정 관리
- ✅ 후속 진료 일정 제안

### Step 8: 보험 자동 처리 💳
- ✅ 진료비 영수증 자동 수집
- ✅ 보험사 자동 청구
- ✅ 실시간 진행상황 추적
- ✅ 환급금 자동 입금
- ✅ 평균 처리 시간: **3-5일** (기존 2-3주 대비 85% 단축)

### Step 9: 건강상태 모니터링 ❤️
- ✅ 의료 기록 기반 건강 분석
- ✅ 종합 건강 점수 (0-100점)
- ✅ 주요 건강 지표 추적 (혈압, 심박수, BMI 등)
- ✅ 위험도 평가 (당뇨, 고혈압, 심혈관)
- ✅ 건강 목표 관리 및 진행도 추적
- ✅ 스마트 건강 알림
- ✅ 건강 추이 분석 (7일/30일/1년)

## 🎨 화면 구성

### 1. 메인 페이지 (서비스 컨셉)
- 일정 기반 통합 의료 서비스 소개
- 9단계 서비스 흐름도 시각화
- 주요 기능 상세 설명
- 건강상태 모니터링 기능 소개

### 2. 소개 페이지 (About)
- WeRuby AI 플랫폼 소개
- AI 기반 스마트 병원 예약
- 3,000개 제휴 병원 네트워크
- 사용자 후기 및 통계

### 3. API 문서 페이지
- 38+ API 엔드포인트 문서
- 8개 카테고리별 분류
- 요청/응답 예시
- HTTP 상태 코드 및 에러 핸들링
- Rate Limiting 정보

### 4. 개인 대시보드
- **Summary Cards**: 예약, 의료기록, 처방전, 보험청구, 건강점수
- **예약 관리**: 예정된 예약 확인 및 수정
- **건강상태**: 종합 건강 분석 및 목표 관리
- **의료 기록**: 진료 이력 및 상세 내역
- **처방전**: 활성 처방전 및 복약 일정
- **보험**: 정책, 청구, 영수증 통합 관리
- **병원 찾기**: 검색 및 상세 정보

## 📊 데이터베이스 스키마

### 사용자 관리
- **users**: 사용자 기본 정보 및 건강 정보
- **user_auth**: 인증 정보 (이메일, 비밀번호 해시)

### 의료 서비스
- **hospitals**: 병원 정보 (3,000+ 제휴 병원)
- **doctors**: 의사 정보 (전문분야, 경력, 평점)
- **appointments**: 예약 정보 (상태: scheduled/completed/cancelled/no-show)
- **medical_records**: 진료 기록 (진단, 증상, 치료)
- **prescriptions**: 처방전 (약물, 복용법, 기간)

### 건강 관리
- **health_status**: 종합 건강 상태 (점수, 레벨, 생체 신호)
- **health_trends**: 건강 지표 변화 추적
- **health_goals**: 개인별 건강 목표
- **health_alerts**: 건강 알림 (긴급/주의/정보/알림)

### 보험 관리
- **insurance_policies**: 가입 보험 정책
- **insurance_claims**: 보험 청구 내역 (6단계 상태 관리)
- **medical_receipts**: 의료 영수증
- **insurance_claim_documents**: 청구 서류

### AI 채팅
- **chat_sessions**: 채팅 세션 (타입: appointment/medical_inquiry/prescription/general)
- **chat_messages**: 메시지 히스토리

## 🏗️ 기술 스택

### Backend
- **Framework**: Hono v4.11.3 (Fast, Lightweight Web Framework)
- **Runtime**: Cloudflare Workers (Edge Computing)
- **Database**: Cloudflare D1 (SQLite-based, Globally Distributed)
- **Language**: TypeScript 5.0+

### Frontend
- **Core**: HTML5 + Vanilla JavaScript
- **Styling**: TailwindCSS 3.0+ (CDN)
- **Icons**: Font Awesome 6.4.0
- **UI Library**: 없음 (순수 구현으로 경량화)

### DevOps
- **Build Tool**: Vite 6.4.1
- **Deployment**: Cloudflare Pages
- **Process Manager**: PM2 (개발 환경)
- **Version Control**: Git + GitHub

### API Design
- **Architecture**: RESTful API
- **Response Format**: JSON
- **HTTP Methods**: GET, POST, PUT, DELETE
- **Status Codes**: 200, 201, 400, 404, 500
- **Rate Limiting**: 1000/hour, 100/min, 10/sec

## 📁 프로젝트 구조

```
webapp/
├── src/
│   ├── index.tsx              # 메인 Hono 애플리케이션 (3,900+ 라인)
│   └── renderer.tsx           # SSR 렌더러
├── public/
│   └── static/
│       ├── app.js             # 메인 페이지 JavaScript
│       ├── dashboard.js       # 대시보드 JavaScript (1,200+ 라인)
│       └── styles.css         # 커스텀 CSS (애니메이션 포함)
├── migrations/
│   ├── 0001_initial_schema.sql      # 기본 스키마
│   ├── 0002_add_insurance_tables.sql # 보험 테이블
│   └── 0003_add_health_status.sql   # 건강상태 테이블
├── seed.sql                   # 샘플 데이터 (병원, 의사, 사용자, 예약)
├── ecosystem.config.cjs       # PM2 프로세스 관리 설정
├── wrangler.jsonc             # Cloudflare Workers 설정
├── vite.config.ts             # Vite 빌드 설정
├── package.json               # 의존성 및 스크립트
├── tsconfig.json              # TypeScript 설정
├── .gitignore                 # Git 무시 파일
├── BRAND.md                   # 브랜드 아이덴티티 가이드
└── README.md                  # 프로젝트 문서 (이 파일)
```

## 🚀 로컬 개발 환경 설정

### 1. 저장소 클론
```bash
git clone https://github.com/seanshin/mediRe.git
cd mediRe
```

### 2. 의존성 설치
```bash
npm install
```

### 3. 데이터베이스 초기화
```bash
# 데이터베이스 리셋 (마이그레이션 + 시드)
npm run db:reset

# 또는 단계별로
npm run db:migrate:local   # 마이그레이션만
npm run db:seed            # 시드 데이터만
```

### 4. 개발 서버 시작
```bash
# 빌드
npm run build

# PM2로 서버 시작
pm2 start ecosystem.config.cjs

# 로그 확인
pm2 logs webapp --nostream

# 서버 중지
pm2 stop webapp
```

### 5. 접속
- **로컬 서버**: http://localhost:3000
- **API Base URL**: http://localhost:3000/api

## 📝 API 엔드포인트 (38+)

### 병원 및 의사 (4개)
```
GET    /api/hospitals                      # 병원 목록
GET    /api/hospitals/:id                  # 병원 상세
GET    /api/hospitals/:id/doctors          # 병원의 의사
GET    /api/doctors?specialty=내과         # 의사 검색
```

### 예약 관리 (3개)
```
POST   /api/appointments                   # 예약 생성
GET    /api/users/:userId/appointments     # 예약 목록
PUT    /api/appointments/:id               # 예약 수정
```

### 의료 기록 (2개)
```
GET    /api/users/:userId/medical-records  # 기록 조회
POST   /api/medical-records                # 기록 생성
```

### 처방전 (2개)
```
GET    /api/users/:userId/prescriptions    # 처방전 목록
POST   /api/prescriptions                  # 처방전 생성
```

### 건강상태 (7개)
```
GET    /api/users/:userId/health/status           # 최신 건강 상태
GET    /api/users/:userId/health/history          # 건강 이력
GET    /api/users/:userId/health/trends           # 건강 추이
GET    /api/users/:userId/health/goals            # 건강 목표
POST   /api/health/goals                          # 목표 생성
PUT    /api/health/goals/:id                      # 목표 수정
GET    /api/users/:userId/health/alerts           # 건강 알림
GET    /api/users/:userId/health/dashboard        # 건강 대시보드
```

### 보험 (7개)
```
GET    /api/users/:userId/insurance/policies      # 보험 정책
POST   /api/insurance/policies                    # 정책 생성
GET    /api/users/:userId/insurance/claims        # 청구 내역
POST   /api/insurance/claims                      # 청구 생성
PUT    /api/insurance/claims/:id                  # 청구 수정
GET    /api/users/:userId/insurance/receipts      # 영수증
GET    /api/users/:userId/insurance/statistics    # 보험 통계
```

### 사용자 및 인증 (6개)
```
POST   /api/auth/register                  # 회원가입
POST   /api/auth/login                     # 로그인
GET    /api/users/:id                      # 사용자 조회
PUT    /api/users/:id                      # 프로필 수정
GET    /api/admin/users                    # 관리자: 사용자 목록
PUT    /api/admin/users/:id/status         # 관리자: 상태 변경
```

### 채팅 (3개)
```
POST   /api/chat/sessions                         # 세션 생성
POST   /api/chat/messages                         # 메시지 추가
GET    /api/chat/sessions/:sessionId/messages     # 메시지 조회
```

**상세 문서**: https://3000-ijzlsqgsdkan82btk4rhl-c81df28e.sandbox.novita.ai/api-docs

## 🔧 개발 명령어

### 개발 서버
```bash
npm run dev              # Vite 개발 서버 (권장하지 않음)
npm run dev:sandbox      # Wrangler 샌드박스 서버
npm run dev:d1           # D1 포함 개발 서버
```

### 빌드
```bash
npm run build            # 프로덕션 빌드
npm run preview          # 빌드 결과 미리보기
```

### 데이터베이스
```bash
npm run db:migrate:local    # 로컬 DB 마이그레이션
npm run db:migrate:prod     # 프로덕션 DB 마이그레이션
npm run db:seed             # 시드 데이터 삽입
npm run db:reset            # DB 완전 초기화
npm run db:console:local    # 로컬 DB 콘솔
npm run db:console:prod     # 프로덕션 DB 콘솔
```

### 배포
```bash
npm run deploy           # Cloudflare Pages 배포
npm run deploy:prod      # 프로덕션 배포 (프로젝트명 지정)
```

### 유틸리티
```bash
npm run clean-port       # 포트 3000 정리
npm run test             # 서버 연결 테스트
npm run cf-typegen       # Cloudflare 타입 생성
```

### Git
```bash
npm run git:init         # Git 초기화 및 첫 커밋
npm run git:commit       # 빠른 커밋
npm run git:status       # Git 상태 확인
npm run git:log          # 커밋 로그 (간략)
```

## 🎨 UI/UX 디자인

### 색상 팔레트
- **Primary**: Purple (#8B5CF6) - 신뢰, 혁신
- **Secondary**: Pink (#EC4899) - 따뜻함, 케어
- **Accent**: Blue (#3B82F6) - 안정, 전문성
- **Success**: Green (#10B981) - 건강, 긍정
- **Warning**: Orange (#F59E0b) - 주의, 알림
- **Error**: Red (#EF4444) - 위험, 긴급

### 디자인 시스템
- **Typography**: Inter (Google Fonts)
- **Icons**: Font Awesome 6.4.0 (5,000+ 아이콘)
- **Glassmorphism**: 유리 질감 효과 (backdrop-blur)
- **Gradient**: 다채로운 그라디언트 배경
- **Neon Effects**: 네온 텍스트 및 글로우
- **3D Transforms**: 호버 시 입체 효과

### 애니메이션
- **Fade In/Out**: 부드러운 등장/퇴장
- **Scale**: 크기 변화 (hover, active)
- **Float**: 떠다니는 효과
- **Pulse**: 심장박동 애니메이션
- **Shimmer**: 반짝이는 효과
- **Gradient Shift**: 그라디언트 이동
- **Ripple**: 물결 효과
- **Particle Background**: 입자 배경

### 반응형 디자인
- **Mobile**: 320px - 767px (모바일 최적화)
- **Tablet**: 768px - 1023px (터치 인터페이스)
- **Desktop**: 1024px+ (풀 레이아웃)

## 📱 사용 가이드

### 일반 사용자 워크플로우

1. **회원가입 및 로그인**
   - 이메일/비밀번호로 가입
   - 건강 정보 입력 (혈액형, 알러지 등)

2. **병원 예약**
   - AI 어시스턴트 클릭
   - "내과 예약하고 싶어요" 입력
   - 추천 병원 선택
   - 날짜/시간 확정

3. **예약 관리**
   - 대시보드 → 예약 관리 탭
   - 예약 내역 확인
   - 필요시 수정/취소

4. **진료 후**
   - 의료 기록 자동 저장
   - 처방전 디지털화
   - 보험 자동 청구

5. **건강 관리**
   - 대시보드 → 건강상태 탭
   - 종합 건강 점수 확인
   - 건강 목표 설정
   - 추이 그래프 확인

6. **보험 관리**
   - 대시보드 → 보험 탭
   - 청구 진행 상황 확인
   - 영수증 관리
   - 환급 내역 확인

### AI 어시스턴트 활용

**빠른 액션**:
- "내과 예약하기"
- "예약 확인하기"
- "처방전 보기"
- "병원 찾기"

**대화 예시**:
```
사용자: "두통이 심해요. 병원 예약하고 싶어요."
AI: "증상을 확인했습니다. 신경과 진료를 추천드립니다. 
     서울대학교병원 김민수 교수님(평점 4.9)이 
     내일 오전 10시에 예약 가능합니다. 예약하시겠습니까?"

사용자: "네, 예약해주세요."
AI: "예약이 완료되었습니다. 내일 1월 15일 10:00에 
     서울대학교병원 신경과 김민수 교수님 진료입니다. 
     문진표는 자동으로 작성되었고, 예약 30분 전에 
     알림을 보내드리겠습니다."
```

## 🎯 프로젝트 진행 현황

### ✅ 완료된 주요 기능

**Phase 1: 기본 인프라** (2026-01-01)
- [x] 프로젝트 초기 설정
- [x] Hono + Cloudflare Workers 구성
- [x] TypeScript 설정
- [x] Vite 빌드 시스템

**Phase 2: 데이터베이스** (2026-01-02)
- [x] D1 데이터베이스 설정
- [x] 마이그레이션 시스템
- [x] 기본 스키마 설계
- [x] 시드 데이터

**Phase 3: 핵심 기능** (2026-01-03 ~ 2026-01-05)
- [x] 병원/의사 API
- [x] 예약 시스템
- [x] 의료 기록 관리
- [x] 처방전 관리
- [x] 채팅 시스템

**Phase 4: UI/UX** (2026-01-06 ~ 2026-01-07)
- [x] 메인 랜딩 페이지
- [x] 개인 대시보드
- [x] AI 챗봇 인터페이스
- [x] 반응형 디자인
- [x] 애니메이션 효과

**Phase 5: 보험 통합** (2026-01-08)
- [x] 보험 정책 관리
- [x] 보험 청구 시스템
- [x] 영수증 관리
- [x] 보험 통계
- [x] 대시보드 통합

**Phase 6: 건강 모니터링** (2026-01-09)
- [x] 건강 상태 분석
- [x] 건강 지표 추적
- [x] 건강 목표 관리
- [x] 건강 알림 시스템
- [x] 건강 대시보드

**Phase 7: 브랜딩** (2026-01-09)
- [x] 메디케어 AI → WeRuby AI 리브랜딩
- [x] 브랜드 아이덴티티 가이드
- [x] 로고 및 비주얼 업데이트
- [x] 서비스 제공업체 링크

**Phase 8: API 문서화** (2026-01-09)
- [x] 개발자 문서 페이지
- [x] 38+ 엔드포인트 문서화
- [x] 8개 카테고리 분류
- [x] 요청/응답 예시
- [x] 에러 핸들링 가이드

### 🔄 진행 중

- [ ] 실제 AI 모델 통합 (GPT-4, Claude 등)
- [ ] Web Speech API 음성 인식
- [ ] 실시간 알림 시스템 (WebSocket)
- [ ] 결제 시스템 통합

### 📋 향후 계획

**Q1 2026**
- [ ] 사용자 인증 강화 (OAuth, 2FA)
- [ ] 가족 계정 관리
- [ ] 약국 연계 서비스
- [ ] 건강검진 데이터 연동

**Q2 2026**
- [ ] 의료진 앱 (별도 인터페이스)
- [ ] 병원 관리자 포털
- [ ] 리뷰 및 평점 시스템
- [ ] 이메일/SMS 알림

**Q3 2026**
- [ ] 모바일 앱 (React Native)
- [ ] 웨어러블 디바이스 연동
- [ ] 건강 데이터 AI 분석 고도화
- [ ] 예방 의학 추천 시스템

**Q4 2026**
- [ ] 국제화 (i18n) - 영어, 중국어, 일본어
- [ ] 의료 관광 서비스
- [ ] 원격 진료 기능
- [ ] 블록체인 기반 의료 기록 관리

## 🔒 보안 및 개인정보 보호

### 현재 구현
- HTTPS 통신 (Cloudflare SSL)
- 비밀번호 해시 (bcrypt)
- CORS 설정
- SQL Injection 방지 (Prepared Statements)
- XSS 방지 (입력 검증)

### 향후 강화 계획
- [ ] JWT 토큰 기반 인증
- [ ] 2단계 인증 (2FA)
- [ ] 의료 데이터 암호화 (AES-256)
- [ ] 접근 로그 및 감사 추적
- [ ] HIPAA 준수
- [ ] 개인정보보호법 준수
- [ ] GDPR 준수 (유럽 진출 시)

## 🧪 테스트

### 샘플 데이터
```javascript
// 테스트 사용자
{
  id: 1,
  name: "홍길동",
  email: "hong@example.com",
  phone: "010-1234-5678",
  birth_date: "1990-05-15",
  gender: "male",
  blood_type: "A+",
  allergies: "페니실린, 땅콩"
}

// 테스트 병원
- 서울대학교병원 (평점: 4.8)
- 삼성서울병원 (평점: 4.7)
- 아산병원 (평점: 4.9)
```

### API 테스트
```bash
# 병원 목록
curl http://localhost:3000/api/hospitals

# 사용자 건강 상태
curl http://localhost:3000/api/users/1/health/status

# 보험 통계
curl http://localhost:3000/api/users/1/insurance/statistics
```

## 📈 프로젝트 통계

- **총 코드 라인**: 5,000+ 라인
- **API 엔드포인트**: 38+
- **데이터베이스 테이블**: 20+
- **UI 페이지**: 7개
- **Git 커밋**: 30+
- **개발 기간**: 9일

## 🤝 기여 방법

이 프로젝트는 현재 프라이빗 개발 단계입니다. 

향후 오픈소스 전환 시:
1. Fork the repository
2. Create your feature branch (`git checkout -b feature/AmazingFeature`)
3. Commit your changes (`git commit -m 'Add some AmazingFeature'`)
4. Push to the branch (`git push origin feature/AmazingFeature`)
5. Open a Pull Request

## 📄 라이선스

이 프로젝트는 데모 및 포트폴리오 목적으로 제작되었습니다.

## 👥 개발팀

- **기획 및 개발**: WeRuby AI Team
- **브랜딩**: WeRuby Design Team
- **서비스 제공**: https://weruby.co.kr

## 📞 문의 및 지원

- **이메일**: api@weruby.co.kr
- **웹사이트**: https://weruby.co.kr
- **GitHub Issues**: https://github.com/seanshin/mediRe/issues
- **API 문서**: https://3000-ijzlsqgsdkan82btk4rhl-c81df28e.sandbox.novita.ai/api-docs

## 🙏 감사의 말

- **Cloudflare**: Workers & Pages 플랫폼 제공
- **Hono**: 빠르고 가벼운 웹 프레임워크
- **TailwindCSS**: 아름다운 UI 구현
- **Font Awesome**: 풍부한 아이콘 라이브러리

---

**최종 업데이트**: 2026-01-09  
**버전**: 2.0.0  
**상태**: ✅ 활성 개발 중  
**배포**: 🚀 Cloudflare Pages  
**브랜드**: 💎 WeRuby AI - "Your Health, Our Ruby"
